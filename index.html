<!DOCTYPE html><!--
This page is automatically generated from a build script.
https://github.com/micro-api/micro-api
--><html lang="en"><head><meta charset="utf-8"><title>Micro API</title><link rel="stylesheet" href="./assets/index.css"><link rel="icon" href="./assets/icon.png"><meta name="description" content="A media type for serializing hypermedia APIs."><meta name="viewport" content="width=device-width,initial-scale=1"></head><body><a class="corner" href="./"><img src="./assets/icon.svg" alt="µ"></a><p class="top-links"><a href="https://github.com/micro-api/micro-api">GitHub Repository</a></p><header><h1>µ API</h1></header><main><article><p class="header"><a href="https://github.com/micro-api/micro-api"><img src="./assets/logo_light.svg" alt="Micro API"></a></p><p>Micro API is a subset of <a href="http://json-ld.org">JSON-LD</a> intended for representing hypermedia APIs. It includes a vocabulary, and semantics for <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete">CRUD</a> operations. As the name implies, it is intended to be concise and generic. Its registered media type is:</p><pre><code class="language-yaml"><span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/vnd.micro+json</span></code></pre><p>The current published version is <strong>2017-04-25</strong>, and the media type is <a href="https://www.iana.org/assignments/media-types/application/vnd.micro+json">registered</a> with the <a href="http://www.iana.org/">IANA</a>.</p><h2 id="introduction">Introduction <a class="anchor" href="#introduction" title="Link to this section “Introduction”">#</a></h2><p>Micro API simplifies <a href="http://json-ld.org">JSON-LD</a> by limiting it to a subset which can be traversed reliably without using processing algorithms. It is designed to look like vanilla JSON and does not assume any prior knowledge of JSON-LD, RDF, OWL, and semantic web in general.</p><p>The goal is to reduce these concepts into their most minimal forms possible, and add affordances needed for APIs, such as querying, creating, updating, and deleting resources. It can be considered a hypermedia format, and it conforms to <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm">Representational State Transfer</a> (REST) at the highest level.</p><p>Example payloads and HTTP requests should be considered non-normative.</p><p>The key words <strong>MUST</strong>, <strong>MUST NOT</strong>, <strong>REQUIRED</strong>, <strong>SHALL</strong>, <strong>SHALL NOT</strong>, <strong>SHOULD</strong>, <strong>SHOULD NOT</strong>, <strong>RECOMMENDED</strong>, <strong>NOT RECOMMENDED</strong>, <strong>MAY</strong>, and <strong>OPTIONAL</strong> in this specification have the meaning defined in <a href="https://www.ietf.org/rfc/rfc2119">RFC 2119</a>.</p><h2 id="vocabulary">Vocabulary <a class="anchor" href="#vocabulary" title="Link to this section “Vocabulary”">#</a></h2><p><em>This section should be considered normative.</em></p><p>Micro API introduces a small vocabulary focused on APIs that is not covered by other standards.</p><table><thead><tr><th align="left">Property</th><th align="left">Type</th><th align="left">Description</th></tr></thead><tbody><tr><td align="left"><a href="http://micro-api.org/id"><code>id</code></a></td><td align="left"><code>String</code>, <code>Number</code></td><td align="left">A unique value used for identifying resources, most often the primary key in a database.</td></tr><tr><td align="left"><a href="http://micro-api.org/meta"><code>meta</code></a></td><td align="left"><code>Object</code></td><td align="left">Any meta-information may be contained here.</td></tr><tr><td align="left"><a href="http://micro-api.org/query"><code>query</code></a></td><td align="left"><code>Object</code></td><td align="left">A container for showing information about the current query.</td></tr><tr><td align="left"><a href="http://micro-api.org/operate"><code>operate</code></a></td><td align="left"><code>Object</code></td><td align="left">Reserved for application-specific, arbitrary operations to update resources.</td></tr><tr><td align="left"><a href="http://micro-api.org/error"><code>error</code></a></td><td align="left"><code>Object</code></td><td align="left">If a request fails for any reason, it <strong>MUST</strong> return an error in the payload.</td></tr><tr><td align="left"><a href="http://micro-api.org/isArray"><code>isArray</code></a></td><td align="left"><code>Boolean</code></td><td align="left">For properties, indicates if their values are arrays (this is lacking in RDF). If this is missing, it should be considered <code>false</code>.</td></tr></tbody></table><h2 id="payload-restrictions">Payload Restrictions <a class="anchor" href="#payload-restrictions" title="Link to this section “Payload Restrictions”">#</a></h2><p><em>This section should be considered normative.</em></p><p>In general, the payload should look like the flattened form of JSON-LD, with some additional restrictions:</p><ul><li>The root node <strong>MUST</strong> be a singular object.</li><li>There <strong>SHOULD</strong> be a top-level <code>@context</code> object, containing at least the context for Micro API: <code>http://micro-api.org/context.jsonld</code>, a <code>@base</code> and a <code>@vocab</code> valued by the entry IRI suffixed with a <code>#</code>. If there is not, then the context may be referenced using a <code>Link</code> header in the response.</li><li>Resources <strong>MUST</strong> contain a unique <code>href</code> <em>and</em> <code>id</code>, no blank nodes are allowed. The <code>href</code> is an IRI (or an alias for <code>@id</code> in JSON-LD parlance), which is not to be confused with <code>id</code> which is an application-specific identifier.</li><li>Resources <strong>SHOULD</strong> be represented as an array via the default <code>graph</code>. The only exception is <em>if and only if</em> one resource is expected.</li><li>References <strong>MUST</strong> be represented as a singular object with either the <code>href</code> property <em>and/or</em> the <code>id</code> property.</li></ul><h2 id="entry-point">Entry Point <a class="anchor" href="#entry-point" title="Link to this section “Entry Point”">#</a></h2><p>The expectation of a Micro API entry point is to enumerate types and properties and provide links to collections. It <strong>MUST</strong> contain the <code>definitions</code> at the top-level, valued as an array of objects, and the <code>type</code> as <code>Ontology</code>.</p><pre class="group"><code class="language-http">GET /</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/"</span>,
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Ontology"</span>,
  <span class="hljs-attr">"definitions"</span>: [ ... ],
  <span class="hljs-attr">"Person"</span>: { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/people"</span> },
  <span class="hljs-attr">"Movie"</span>: { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/movies"</span> }
}</code></pre><p>Definitions communicate the overall schema of the API which is useful for machine clients, and also may include documentation for humans. Here is an example of what they might look like:</p><pre><code class="language-json">[
  { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"#name"</span>, <span class="hljs-attr">"id"</span>: <span class="hljs-string">"name"</span>, <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Name"</span>,
    <span class="hljs-attr">"propertyOf"</span>: [ <span class="hljs-string">"#Person"</span>, <span class="hljs-string">"#Movie"</span> ],
    <span class="hljs-attr">"propertyType"</span>: <span class="hljs-string">"xsd:string"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Property"</span>, <span class="hljs-attr">"comment"</span>: <span class="hljs-string">"Given name."</span>
  },
  { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"#actor"</span>, <span class="hljs-attr">"id"</span>: <span class="hljs-string">"actor"</span>, <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Actors"</span>,
    <span class="hljs-attr">"propertyOf"</span>: [ <span class="hljs-string">"#Movie"</span> ],
    <span class="hljs-attr">"propertyType"</span>: <span class="hljs-string">"#Person"</span>, <span class="hljs-attr">"isArray"</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Property"</span>, <span class="hljs-attr">"comment"</span>: <span class="hljs-string">"People who acted in a movie."</span>
  },
  { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"#Person"</span>, <span class="hljs-attr">"id"</span>: <span class="hljs-string">"Person"</span>, <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Person"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Class"</span>, <span class="hljs-attr">"comment"</span>: <span class="hljs-string">"A human being."</span>
  },
  { <span class="hljs-attr">"href"</span>: <span class="hljs-string">"#Movie"</span>, <span class="hljs-attr">"id"</span>: <span class="hljs-string">"Movie"</span>, <span class="hljs-attr">"label"</span>: <span class="hljs-string">"Movie"</span>,
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Class"</span>, <span class="hljs-attr">"comment"</span>: <span class="hljs-string">"A moving picture."</span>
  }
]</code></pre><p>If the <code>@context</code> is omitted in the payload at the top level, then it must be referenced in a <code>Link</code> header in the response. <strong>Important</strong>: if done this way, the external <code>@context</code> should be inlined since JSON-LD processors will not dereference it.</p><pre><code class="language-js">{
  <span class="hljs-string">"@context"</span>: {
    <span class="hljs-comment">/* Merge this external context:
       http://micro-api.org/context.jsonld */</span>
    <span class="hljs-string">"@base"</span>: <span class="hljs-string">"http://example.com/"</span>,
    <span class="hljs-string">"@vocab"</span>: <span class="hljs-string">"http://example.com/#"</span>
  }
}</code></pre><p>The <code>@vocab</code> field of a Micro API <strong>MUST</strong> be the path to the API suffixed with the <code>#</code> character, so that dereferencing always refers to the entry point.</p><p>The <code>Link</code> header may be formatted like so:</p><pre><code class="language-yaml"><span class="hljs-attr">Link:</span>
  <span class="hljs-string">&lt;http://example.com/context.jsonld&gt;;</span>
  <span class="hljs-string">rel="http://www.w3.org/ns/json-ld#context";</span>
  <span class="hljs-string">type="application/ld+json"</span></code></pre><p>For display purposes, it has been broken into multiple lines, but HTTP headers must always be on one line.</p><h2 id="finding-resources">Finding Resources <a class="anchor" href="#finding-resources" title="Link to this section “Finding Resources”">#</a></h2><p>A <code>GET</code> request <strong>MAY</strong> be allowed on the collection IRI for a particular type.</p><pre class="group"><code class="language-http">GET /movies</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/movies"</span>,
  <span class="hljs-attr">"graph"</span>: [ {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Movie"</span>,
    <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/movies/1"</span>,
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"The Matrix"</span>,
    <span class="hljs-attr">"actor"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/movies/1/actors"</span>,
      <span class="hljs-attr">"id"</span>: [ <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span> ]
    }
  } ]
}</code></pre><p>Dereferencing a <code>href</code> <strong>MUST</strong> return types corresponding to that property.</p><pre class="group"><code class="language-http">GET /movies/the-matrix/actors?limit=1</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/movies/the-matrix/actors"</span>,
  <span class="hljs-attr">"graph"</span>: [ {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Person"</span>,
    <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/people/1"</span>,
    <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Keanu Reeves"</span>,
    <span class="hljs-attr">"reverse"</span>: {
      <span class="hljs-attr">"actor"</span>: {
        <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/people/1/acted-in"</span>,
        <span class="hljs-attr">"id"</span>: [ <span class="hljs-number">1</span> ]
      }
    }
  } ]
}</code></pre><p>It may be <strong>OPTIONAL</strong> to wrap the resources in a <code>graph</code> <em>if and only if</em> exactly one resource is expected. For example:</p><pre class="group"><code class="language-http">GET /people/1</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"type"</span>: <span class="hljs-string">"Person"</span>,
  <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/people/1"</span>,
  <span class="hljs-attr">"id"</span>: <span class="hljs-number">1</span>,
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Keanu Reeves"</span>,
  <span class="hljs-attr">"reverse"</span>: {
    <span class="hljs-attr">"actor"</span>: {
      <span class="hljs-attr">"href"</span>: <span class="hljs-string">"/people/1/acted-in"</span>,
      <span class="hljs-attr">"id"</span>: [ <span class="hljs-number">1</span> ]
    }
  }
}</code></pre><h2 id="creating-resources">Creating Resources <a class="anchor" href="#creating-resources" title="Link to this section “Creating Resources”">#</a></h2><p>Requesting to create an resource <strong>MAY</strong> be allowed at the collection IRI for that type. The payload <strong>MUST</strong> be a valid Micro API document, and referenced IDs must be specified using the <code>id</code> property.</p><pre class="group"><code class="language-http">POST /people</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"graph"</span>: [ {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"John Doe"</span>,
    <span class="hljs-attr">"reverse"</span>: {
      <span class="hljs-attr">"actor"</span>: {
        <span class="hljs-attr">"id"</span>: [ <span class="hljs-string">"memento"</span> ]
      }
    }
  } ]
}</code></pre><p>It may be <strong>OPTIONAL</strong> to wrap the resource in a <code>graph</code> array <em>if and only if</em> one resource is to be created.</p><p>It may be helpful for the response to have a <code>Location</code> header, but it is not required since the response body may include a link to the created resource.</p><h2 id="updating-resources">Updating Resources <a class="anchor" href="#updating-resources" title="Link to this section “Updating Resources”">#</a></h2><p>IDs <strong>MUST</strong> be specified in the payload per resource to update, and <code>PATCH</code> requests can be made wherever the resource exists (<em>corollary</em>: IDs can not be changed, only specified).</p><pre class="group"><code class="language-http">PATCH /people</code></pre><pre class="group"><code class="language-json">{
  <span class="hljs-attr">"graph"</span>: [ {
    <span class="hljs-attr">"id"</span>: <span class="hljs-string">"john-doe"</span>,
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"Johnny Doe"</span>,
    <span class="hljs-attr">"reverse"</span>: {
      <span class="hljs-attr">"actor"</span>: {
        <span class="hljs-attr">"id"</span>: [ <span class="hljs-string">"point-break"</span> ]
      }
    },
    <span class="hljs-attr">"operate"</span>: {}
  } ]
}</code></pre><p>It may be <strong>OPTIONAL</strong> to wrap the update in a <code>graph</code> array <em>if and only if</em> one resource is to be updated.</p><p>If the a specified resource does not exist at the requested location, it <strong>SHOULD</strong> return an error. The assumption is that <em>the <code>PATCH</code> method replaces the fields specified</em>. There is a special <code>operate</code> property which allows for arbitrary updates, which this specification is agnostic about. In common update cases, it may be desirable to reject upserts (the <code>PUT</code> method defines that <a href="http://greenbytes.de/tech/webdav/draft-ietf-httpbis-p2-semantics-21.html#PUT">a resource may be created</a>), so <code>PATCH</code> is typically what you want to do.</p><p><code>PATCH</code> requests can update existing resources, however Micro API does not define the semantics to create or delete resources with this method. By setting a link's <code>id</code> property to <code>null</code> (for a to-one relationship) or <code>[]</code> (empty array for a to-many relationship), it removes the link.</p><h2 id="deleting-resources">Deleting Resources <a class="anchor" href="#deleting-resources" title="Link to this section “Deleting Resources”">#</a></h2><pre><code class="language-http">DELETE /people/john-doe</code></pre><p>A delete request can return no payload (HTTP 204 No Content) if it succeeds. It can apply to any IRI, including collections.</p><pre><code class="language-http">DELETE /people/john-doe/children</code></pre><p>In this example, the request means delete all of the resources at this IRI, not just the link.</p><h2 id="error-response">Error Response <a class="anchor" href="#error-response" title="Link to this section “Error Response”">#</a></h2><p>If a request fails for any reason, it <strong>MUST</strong> return a <code>error</code> object. The contents of the error object are opaque to this specification.</p><pre><code class="language-json">{
  <span class="hljs-attr">"error"</span>: {
    <span class="hljs-attr">"label"</span>: <span class="hljs-string">"NotFoundError"</span>,
    <span class="hljs-attr">"comment"</span>: <span class="hljs-string">"The requested resource was not found."</span>
  }
}</code></pre><h2 id="querying">Querying <a class="anchor" href="#querying" title="Link to this section “Querying”">#</a></h2><p>Micro API does not specify anything about pagination, filtering, sparse fields, sorting, etc. For example, the <code>query</code> object <strong>MAY</strong> contain hints on what queries can be appended to GET requests, with further information about the query provided by a vocabulary (definitions are optional):</p><pre><code class="language-json">{
  <span class="hljs-attr">"query"</span>: {
    <span class="hljs-attr">"@context"</span>: <span class="hljs-literal">null</span>,
    <span class="hljs-attr">"include"</span>: [],
    <span class="hljs-attr">"sort"</span>: {},
    <span class="hljs-attr">"field"</span>: {},
    <span class="hljs-attr">"match"</span>: {},
    <span class="hljs-attr">"limit"</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">"offset"</span>: <span class="hljs-number">0</span>
  }
}</code></pre><h2 id="unregistered-media-type">Unregistered Media Type <a class="anchor" href="#unregistered-media-type" title="Link to this section “Unregistered Media Type”">#</a></h2><p>One may use <a href="http://msgpack.org">MessagePack</a> instead of JSON as the serialization format for greater bandwidth savings. Since MessagePack is an unregistered media type, the corresponding Micro API media type may be unregistered as well:</p><pre><code class="language-yaml"><span class="hljs-attr">Content-Type:</span> <span class="hljs-string">application/x-micro-api</span></code></pre><p>It is completely <strong>OPTIONAL</strong> to support this unregistered media type, but it should be interpreted as Micro API with MessagePack enabled.</p><h2 id="prior-art">Prior Art <a class="anchor" href="#prior-art" title="Link to this section “Prior Art”">#</a></h2><p>Micro API builds upon <a href="https://www.w3.org/TR/json-ld/">JSON-LD</a>, which is a W3C recommendation. A JSON-based serialization format has the advantage of widespread tooling and developer understanding.</p><p>In contrast to <a href="https://www.w3.org/TR/ldp/">Linked Data Platform</a>, it does not use the Turtle format, which is useful only for working within <a href="https://www.w3.org/RDF/">RDF</a>. It also lacks a concept of "containers", which assumes that relationships are hierarchical. What is similar is that both stipulate which actions may be taken on resources.</p><p>Micro API is an alternative for <a href="http://www.markus-lanthaler.com/hydra/">Hydra</a>, another specification for Web APIs. It is much less prescriptive than Hydra, and is implicit in cases which Hydra is more explicit. For example, some differences are:</p><ul><li><strong>Collection</strong>: all resources are collections.</li><li><strong>Operation</strong>: these are assumed to match HTTP semantics. Only <code>PATCH</code> requests may have special application-specific operations, using <code>operate</code>.</li><li><strong>Templated link</strong>: clients must follow server links and only queries are allowed.</li><li><strong>API documentation</strong>: this is expected to contain natural language.</li></ul><p>A key difference between Micro API and Hydra is that Micro API <strong>does not</strong> assume that documentation is machine-processable. Why this matters is that natural language may be the only way to express application logic.</p><h2 id="about">About <a class="anchor" href="#about" title="Link to this section “About”">#</a></h2><p>The author of this document is Dali Zheng. The source for this document is on <a href="https://github.com/micro-api/micro-api">GitHub</a>. It is licensed under the <a href="https://raw.githubusercontent.com/micro-api/micro-api/master/LICENSE">CC0 1.0 License</a>.</p></article></main></body></html>